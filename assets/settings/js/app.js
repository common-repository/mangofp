(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"075f":function(e,t,r){"use strict";var n=r("d412"),a=r.n(n);a.a},4034:function(e,t,r){"use strict";var n=r("ac0d"),a=r.n(n);a.a},"4f8f":function(e,t,r){},"67e8":function(e,t,r){"use strict";var n=r("4f8f"),a=r.n(n);a.a},7983:function(e,t,r){},"955d":function(e,t,r){"use strict";var n=r("a259"),a=r.n(n);a.a},a259:function(e,t,r){},ac0d:function(e,t,r){},c827:function(e,t,r){"use strict";var n=r("ecb6"),a=r.n(n);a.a},cb26:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t),r.d(t,"bus",(function(){return gt})),r.d(t,"dataStore",(function(){return bt}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",{staticClass:"main"},[r("v-main",[r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("MangoFpSettingsMain")],1)],1)],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height px-0 py-5 ml-0"},[e.loading?r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):r("v-row",[r("v-col",[r("h1",[e._v(e._s(e.locStr("MangoFp settings")))]),r("v-alert",{attrs:{dismissible:"",outlined:"",type:"warning",border:"left"},model:{value:e.globalState.generalAlert.showAlert,callback:function(t){e.$set(e.globalState.generalAlert,"showAlert",t)},expression:"globalState.generalAlert.showAlert"}},[e._v(" "+e._s(e.globalState.generalAlert.alertMessage)+" ")]),r("v-snackbar",{attrs:{dismissible:"",absolute:"",centered:"",color:"primary",top:"",timeout:e.timeout,text:""},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{color:"white",icon:""},on:{click:function(t){e.globalState.generalMessage.showAlert=!1}}},"v-btn",n,!1),[r("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.globalState.generalMessage.showAlert,callback:function(t){e.$set(e.globalState.generalMessage,"showAlert",t)},expression:"globalState.generalMessage.showAlert"}},[e._v(" "+e._s(e.globalState.generalMessage.alertMessage)+" ")]),r("v-tabs",{staticClass:"settings-main-tabs",on:{change:e.doOnChange}},[r("v-tab",[e._v(e._s(e.locStr("Define process steps")))]),r("v-tab",[e._v(e._s(e.locStr("Parameters")))]),r("v-tab-item",{attrs:{transition:"false","reverse-transition":"false"}},[r("MangoFpProcessSteps")],1),r("v-tab-item",{attrs:{transition:"false","reverse-transition":"false"}},[r("MangoFpParameters")],1)],1)],1)],1)],1)},c=[],l=(r("96cf"),r("1da1")),u=(r("d81d"),r("b64b"),r("bc3a")),d=r.n(u);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["[contactEmail]"],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{stateCode:e,mainAddresses:n,addresses:r,template:t,loaded:a}}function f(e){var t=window.MANGOFP_RESOURCES;return t&&t.strings&&t.strings[e]?t.strings[e]:e}function m(e){if(!e)return!0;var t=/([a-zA-Z0-9+._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/;return t.test(e)}(function(e){e["text"]="TEXT",e["email"]="EMAIL",e["boolean"]="BOOL",e["select"]="SELECT"})(n||(n={}));var v=window.MANGOFP_RESOURCES,h=v["adminUrl"],g=v["nonce"];function b(e){return S.apply(this,arguments)}function S(){return S=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={headers:{"X-WP-Nonce":g}},e.next=3,d.a.get(h+t,r);case 3:if(n=e.sent,n&&200===n.status){e.next=6;break}throw new Error("Unable to read data from "+t);case 6:if("status"in n.data&&"RESULT_SUCCESS"===n.data.status&&"payload"in n.data){e.next=8;break}throw new Error("Could not read response status");case 8:return e.abrupt("return",n.data.payload);case 9:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function x(e,t){return w.apply(this,arguments)}function w(){return w=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={headers:{"X-WP-Nonce":g}},e.next=3,d.a.post(h+t,r,n);case 3:if(a=e.sent,a&&200===a.status){e.next=6;break}throw new Error("Error received from request. Details: "+t);case 6:if("status"in a.data&&"RESULT_SUCCESS"===a.data.status&&"payload"in a.data){e.next=8;break}throw new Error("Could not read response status");case 8:return e.abrupt("return",a.data.payload);case 9:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function A(e){return E.apply(this,arguments)}function E(){return E=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:bt.resetState(),r=0,n=Object.keys(t);case 2:if(!(r<n.length)){e.next=11;break}return a=n[r],s=t[a],s.template=p(s.code),e.next=8,bt.addState(s);case 8:r++,e.next=2;break;case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function _(){return y.apply(this,arguments)}function y(){return y=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("/steps").catch((function(e){return bt.setGeneralAlert(f("Unable to fetch all states: "+e.message)),!1}));case 2:if(t=e.sent,t.steps){e.next=6;break}return bt.setGeneralAlert(f("No steps in response while getting all states")),e.abrupt("return",!1);case 6:return e.next=8,A(t.steps);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function C(e){for(var t in e)bt.setOption(e[t]);return!0}function k(){return O.apply(this,arguments)}function O(){return O=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("/option").catch((function(e){return bt.setGeneralAlert(f("Unable to fetch options: "+e.message)),!1}));case 2:if(t=e.sent,t.options){e.next=6;break}return bt.setGeneralAlert(f("No options in response while getting options")),e.abrupt("return",!1);case 6:return e.abrupt("return",C(t.options));case 7:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function V(e,t){return M.apply(this,arguments)}function M(){return M=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x("/steps",{action:t,state:r}).catch((function(e){return bt.setGeneralAlert(f("Failed to add new step: "+e.message)),!1}));case 2:if(n=e.sent,n.steps){e.next=6;break}return bt.setGeneralAlert(f("No steps in response when loading new state")),e.abrupt("return",!1);case 6:return e.next=8,A(n.steps);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function T(e,t,r,n){return R.apply(this,arguments)}function R(){return R=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt.setInfoSaving(t,!0),e.next=3,x("/steps/"+t,{action:r,state:n,next:a}).catch((function(e){return bt.setGeneralAlert(f("Failed to update a step: "+e.message)),bt.setInfoSaving(t,!1),!1}));case 3:if(s=e.sent,s.steps){e.next=8;break}return bt.setGeneralAlert(f("Error loading data from server: Steps not found in response.")),bt.setInfoSaving(t,!1),e.abrupt("return",!1);case 8:return e.next=10,A(s.steps);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function j(e){return P.apply(this,arguments)}function P(){return P=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x("/steps/"+t+"/delete",{}).catch((function(e){return bt.setGeneralAlert(f("Failed to delete a step: "+e.message)),!1}));case 2:if(r=e.sent,r.steps){e.next=6;break}return console.log("No steps in response"),e.abrupt("return",!1);case 6:return e.next=8,A(r.steps);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function F(e,t){return D.apply(this,arguments)}function D(){return D=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt.updateOrder(t,r),x("/steps/"+t+"/move"+r,{}).catch((function(e){_(),bt.setGeneralAlert(f("Error while fetching data during steps reordering: "+e.message))})),e.abrupt("return");case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function L(e){return G.apply(this,arguments)}function G(){return G=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("/templates/".concat(t)).catch((function(e){return bt.setGeneralAlert(f("Error while fetching data for email templates: "+e.message)),!1}));case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return",!1);case 5:return"template"in r&&t in r.template?(n=r.template[t],bt.updateOrInsertEmailTemplate(t,n.template,n.addresses,n.mainAddresses,!0)):bt.markTemplateAsLoaded(t),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function I(e,t,r,n){return $.apply(this,arguments)}function $(){return $=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={code:t,templateText:r,emails:n,primaryEmails:a},bt.setTemplateSaving(t,!0),e.next=4,x("/templates/"+t,s).catch((function(e){return bt.setGeneralAlert(f("Failed to update an email template: "+e.message)),bt.setTemplateSaving(t,!1),!1}));case 4:if(i=e.sent,!i){e.next=8;break}return e.next=8,bt.updateOrInsertEmailTemplate(t,r,n,a,!0);case 8:return bt.setTemplateSaving(t,!1),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function N(e){return U.apply(this,arguments)}function U(){return U=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.map((function(e){return{key:e.label,value:e.value}})),e.next=3,x("/options",{options:r}).catch((function(e){return bt.setGeneralAlert(f("Failed to store options:")+" "+e.message),!1}));case 3:n=e.sent,n.options?C(n.options):bt.setGeneralAlert(f("No options in response while updating options")),bt.setGeneralMessage(f("Changes to parameters applied"));case 6:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function B(){bt.clearGeneralMessage()}var z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-sheet",{attrs:{"background-color":"transparent",color:"basil",elevation:"0"}},[r("v-container",{attrs:{"pa-0":""}},[r("v-row",{attrs:{justify:"space-around","no-gutters":""}},[r("v-col",[r("v-card",[r("v-card-title",[e._v(" "+e._s(e.locStr("Define steps in Your contact management process"))+" ")]),r("v-card-text",[r("div",{staticClass:"font-weight-bold ml-8 mb-2"},[e._v(" "+e._s(e.locStr("Steps"))+" ")]),r("v-timeline",{attrs:{"align-top":"",dense:""}},[e._l(e.states,(function(t){return r("v-timeline-item",{key:t.order,attrs:{small:""}},[r("v-card",{staticClass:"steps-background"},[r("v-card-title",{staticClass:"pl-5"},[e._v(" "+e._s(t.order+". "+t.state)+" ")]),r("v-card-text",[r("MangoFpEditStepDetails",{attrs:{state:t}})],1),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:function(r){return r.stopPropagation(),e.openDeleteConfirm(t.code)}}},[e._v(" "+e._s(e.locStr("Delete"))+" ")]),r("div",{staticClass:"reordering"},[r("span",[e._v(" "+e._s(e.locStr("Reorder"))+" ")]),r("v-btn",{staticClass:"ml-2 pa-0",attrs:{text:""},on:{click:function(r){return e.orderStepUp(t.code)}}},[e._v(" "+e._s(e.locStr("Up")))]),r("v-btn",{staticClass:"ml-2 pa-0",attrs:{text:""},on:{click:function(r){return e.orderStepDown(t.code)}}},[e._v(" "+e._s(e.locStr("Down")))])],1)],1)],1)],1)})),e.newStepModifyOpen?r("v-timeline-item",[r("MangoFpEditStep",{attrs:{code:"",description:""},on:{close:e.closeStepEdit,add:e.addStepEdit}})],1):e._e()],2)],1),r("v-card-actions",[r("v-btn",{attrs:{color:"black",text:""},on:{click:e.openStepAdd}},[e._v(" "+e._s(e.locStr("Add state"))+" ")])],1)],1)],1)],1)],1),r("v-dialog",{attrs:{width:"290","retain-focus":!1,"overlay-opacity":.2},model:{value:e.delDialogOpen,callback:function(t){e.delDialogOpen=t},expression:"delDialogOpen"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.locStr("Are you sure?"))+" ")]),r("v-card-text",[e._v(" "+e._s(e.locStr("Are you sure that you want to delete step "+e.delConfirmCode))+" ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialogConfirm()}}},[e._v(" "+e._s(e.locStr("Cancel"))+" ")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.deleteStep()}}},[e._v(" "+e._s(e.locStr("Confirm"))+" ")])],1)],1)],1)],1)},W=[],Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{attrs:{dark:"",color:"#f1f1f1"}},[r("v-card-text",{staticClass:"pb-0"},[r("v-text-field",{staticClass:"input-on-card",attrs:{light:"",hint:e.locStr("Action - What should be done to achieve result of this step"),solo:"",dense:"",label:e.locStr("Action")},model:{value:e.action4Edit,callback:function(t){e.action4Edit=t},expression:"action4Edit"}}),r("v-text-field",{ref:"stateField",staticClass:"input-on-card",attrs:{light:"",hint:e.locStr("Step - What is achieved in this step"),solo:"",dense:"",label:e.locStr("Description")},model:{value:e.state4Edit,callback:function(t){e.state4Edit=t},expression:"state4Edit"}})],1),r("v-card-actions",[r("v-btn",{attrs:{light:"",text:""},on:{click:e.saveData}},[e._v(" "+e._s(e.locStr("Save"))+" ")]),r("v-btn",{attrs:{light:"",text:""},on:{click:e.cancelSaving}},[e._v(" "+e._s(e.locStr("Cancel"))+" ")])],1)],1),r("v-overlay",{attrs:{value:e.showLoader,absolute:e.absolute}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},q=[],X=a["default"].extend({name:"MangoFpEditStep",props:{code:{type:String},action:{type:String},state:{type:String},showLoader:{type:Boolean}},data:function(){return{code4Edit:this.code||"",action4Edit:this.action||"",state4Edit:this.state||"",absolute:!0}},mounted:function(){var e=this.$refs.stateField;this.code||(e=this.$refs.codeField),e&&e.focus()},methods:{locStr:function(e){return f(e)},saveData:function(){this.$emit("add",{code:this.code4Edit.toUpperCase(),action:this.action4Edit,state:this.state4Edit})},cancelSaving:function(){this.code4Edit=this.code,this.action4Edit=this.action,this.state4Edit=this.state,this.$emit("close")}}}),H=X,J=(r("f38f"),r("2877")),Y=r("6544"),K=r.n(Y),Q=r("8336"),ee=r("b0af"),te=r("99d9"),re=r("a797"),ne=r("490a"),ae=r("8654"),se=Object(J["a"])(H,Z,q,!1,null,null,null),ie=se.exports;K()(se,{VBtn:Q["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VOverlay:re["a"],VProgressCircular:ne["a"],VTextField:ae["a"]});var oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-expansion-panels",{attrs:{accordion:""}},[r("v-expansion-panel",{ref:"infoPanel"},[r("v-expansion-panel-header",[r("div",{staticClass:"step-panel-header"},[e._v(" "+e._s(e.state.order)+". "+e._s(e.locStr("Step: ")+e.state.state)+" ")])]),r("v-expansion-panel-content",[r("MangoFpEditStep",{attrs:{code:e.state.code,action:e.state.action,state:e.state.state,showLoader:e.state.savingInfo},on:{close:e.closeInfoPane,add:e.updateInfoEdit}})],1)],1),r("v-expansion-panel",{ref:"nextStepsPanel"},[r("v-expansion-panel-header",[r("div",{staticClass:"step-panel-header"},[e._v(e._s(e.locStr("Next steps"))+":")]),r("div",{staticClass:"next-state-header-blrplt"},[e._v(" "+e._s(e.nextStepsNames(e.state.next))+" ")])]),r("v-expansion-panel-content",[r("MangoFpEditProcess",{attrs:{state:e.state,allStates:e.possibleNextStates(e.state.code),saveInProgress:e.saveInProgress,showLoader:e.state.savingInfo},on:{close:e.closeStepsPane,add:e.saveStepsData}})],1)],1),r("v-expansion-panel",{ref:"templatePanel"},[r("v-expansion-panel-header",[r("strong",[e._v(" "+e._s(e.locStr("Email template")))])]),r("v-expansion-panel-content",[r("MangoFpEditEmailTemplate",{attrs:{code:e.state.code,addresses:e.template.addresses,mainAddresses:e.template.mainAddresses,templateText:e.template.template,loaded:e.template.loaded,showLoader:e.state.savingTemplate,state:e.state},on:{updateTemplate:e.saveTemplate,close:e.closeTemplatePane}})],1)],1)],1)},ce=[],le=(r("4de4"),r("4160"),r("caad"),r("a15b"),r("2532"),r("498a"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"next-steps pa-0"},e._l(e.allStates,(function(t){return r("v-switch",{key:t.value,staticClass:"col-md-6 pa-0 mt-1",attrs:{inset:"",label:t.text,value:t.value},model:{value:e.next4Edit,callback:function(t){e.next4Edit=t},expression:"next4Edit"}})})),1),r("v-card-actions",{staticClass:"pl-0",attrs:{color:""}},[r("v-btn",{attrs:{outlined:"",text:""},on:{click:e.saveData}},[e._v(" "+e._s(e.locStr("Confirm"))+" ")]),r("v-btn",{attrs:{outlined:"",text:""},on:{click:e.cancelSaving}},[e._v(" "+e._s(e.locStr("Cancel"))+" ")])],1)],1),r("v-overlay",{attrs:{value:e.showLoader,absolute:e.absolute}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)}),ue=[],de=r("2909"),pe=a["default"].extend({name:"MangoFpEditProcess",props:{state:{type:Object,required:!0},allStates:{type:Array,required:!0},showLoader:{type:Boolean}},data:function(){return{next4Edit:Object(de["a"])(this.state.next),absolute:!0}},methods:{locStr:function(e){return f(e)},saveData:function(){this.$emit("add",{code:this.state.code,next:this.next4Edit})},cancelSaving:function(){this.next4Edit=Object(de["a"])(this.state.next),this.$emit("close")}}}),fe=pe,me=(r("4034"),r("b73d")),ve=Object(J["a"])(fe,le,ue,!1,null,null,null),he=ve.exports;K()(ve,{VBtn:Q["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VOverlay:re["a"],VProgressCircular:ne["a"],VSwitch:me["a"]});var ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loaded?r("v-card",{staticClass:"pa-0",attrs:{flat:""}},[r("v-card-text",[r("v-text-field",{staticClass:"step-text-field",attrs:{solo:"",label:e.locStr("Primary addresses"),hint:e.locStr("Primary addresses for emails. [contactEmail] - is an email on submitted form"),error:!e.mainAddressesAreValid,"error-messages":e.mainAddressesValidationError},model:{value:e.mainAddressesAsString,callback:function(t){e.mainAddressesAsString=t},expression:"mainAddressesAsString"}}),r("v-text-field",{staticClass:"step-text-field",attrs:{solo:"",label:e.locStr("CC Addresses"),hint:e.locStr("CC addresses for archiving options"),error:!e.addressesAreValid,"error-messages":e.addressesValidationError},model:{value:e.addressesAsString,callback:function(t){e.addressesAsString=t},expression:"addressesAsString"}}),r("vue-editor",{staticClass:"emailEditor",attrs:{editorToolbar:e.editorToolbar},model:{value:e.email4Edit,callback:function(t){e.email4Edit=t},expression:"email4Edit"}})],1),r("v-card-actions",{staticClass:"pl-0",attrs:{color:""}},[r("v-btn",{attrs:{outlined:"",text:""},on:{click:e.saveTemplate}},[e._v(" "+e._s(e.locStr("Confirm"))+" ")]),r("v-btn",{attrs:{outlined:"",text:""},on:{click:e.cancelTemplate}},[e._v(" "+e._s(e.locStr("Cancel"))+" ")])],1)],1):e._e(),r("v-overlay",{attrs:{value:e.showLoader,absolute:e.absolute}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},be=[],Se=(r("ac1f"),r("1276"),r("5873")),xe=a["default"].extend({name:"MangoFpEditEmailTemplate",components:{VueEditor:Se["a"]},props:{code:{type:String},addresses:{type:Array},mainAddresses:{type:Array},templateText:{type:String},loaded:{type:Boolean},showLoader:{type:Boolean},state:{type:Object}},data:function(){return{email4Edit:"",addressesAsString:"",mainAddressesAsString:"",addressesAreValid:!0,addressesValidationError:"",mainAddressesAreValid:!0,mainAddressesValidationError:"",absolute:!0,editorToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]}},mounted:function(){console.log("MangoFpEditTemplate mounted. Code: "+this.code),this.addressesAsString=this.getAddressesAsString(this.addresses),this.mainAddressesAsString=this.getAddressesAsString(this.mainAddresses),L(this.code)},watch:{addresses:function(){this.addressesAsString=this.getAddressesAsString(this.addresses)},mainAddresses:function(){this.mainAddressesAsString=this.getAddressesAsString(this.mainAddresses)},templateText:function(){this.email4Edit=this.templateText}},methods:{locStr:function(e){return f(e)},getAddressesAsString:function(e){return e.join("; ")},stringAsAddresses:function(e){return e.split(";").map((function(e){return e.trim()}))},resetErrors:function(){return this.addressesAreValid=!0,this.mainAddressesAreValid=!0,this.addressesValidationError="",this.mainAddressesValidationError="",!0},validateAndGetEmailAddresses:function(e){var t=this,r=["[contactEmail]"],n=e.map((function(e){var n=e.trim();if(!n)return"";if(r.includes(n))return n;if(!m(n))throw new Error(n+" "+t.locStr("is not proper email"));return n}));return n.filter((function(e){return e}))},saveTemplate:function(){this.resetErrors();var e=this.stringAsAddresses(this.addressesAsString),t=this.stringAsAddresses(this.mainAddressesAsString);try{t=this.validateAndGetEmailAddresses(t)}catch(r){return this.mainAddressesAreValid=!1,this.mainAddressesValidationError=r.message,!1}try{e=this.validateAndGetEmailAddresses(e)}catch(r){return this.addressesAreValid=!1,this.addressesValidationError=r.message,!1}this.$emit("updateTemplate",{code:this.code,addresses:e,mainAddresses:t,templateText:this.email4Edit})},cancelTemplate:function(){this.addressesAsString=this.getAddressesAsString(this.addresses),this.mainAddressesAsString=this.getAddressesAsString(this.mainAddresses),this.email4Edit=this.templateText,this.resetErrors(),this.$emit("close")}}}),we=xe,Ae=(r("d999"),Object(J["a"])(we,ge,be,!1,null,null,null)),Ee=Ae.exports;K()(Ae,{VBtn:Q["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VOverlay:re["a"],VProgressCircular:ne["a"],VTextField:ae["a"]});var _e=a["default"].extend({name:"MangoFpEditStepDetails",components:{MangoFpEditProcess:he,MangoFpEditStep:ie,MangoFpEditEmailTemplate:Ee},props:{state:{type:Object,required:!0}},data:function(){var e=bt.getStateList(),t=this.state.template;return{states:e,template:t,saveInProgress:!1,tempShow:!1}},methods:{locStr:function(e){return f(e)},possibleNextStates:function(e){var t=[],r=this.states;return r.forEach((function(r){r.code!==e&&t.push({value:r.code,text:r.state})})),t},nextStepsNames:function(e){var t=[],r=this.states;return r.forEach((function(r){e.includes(r.code)&&t.push(r.state)})),t.length<1?"<"+f("none")+">":""+t.join(", ")},saveStepsData:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:T(e.code,void 0,void 0,e.next);case 1:case"end":return t.stop()}}),t)})))()},closeStepsPane:function(){this.states=bt.getStateList();var e=this.$refs.nextStepsPanel;e.toggle()},closeTemplatePane:function(){var e=this.$refs.templatePanel;e.toggle()},closeInfoPane:function(){var e=this.$refs.infoPanel;e.toggle()},saveTemplate:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:I(t.state.code,e.templateText,e.addresses,e.mainAddresses),t.closeTemplatePane();case 2:case"end":return r.stop()}}),r)})))()},validateAndGetEmailAddresses:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=["[contactEmail]"],a=e.map((function(e){var r=e.trim();if(!r)return"";if(n.includes(r))return r;var a=/([a-zA-Z0-9+._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/;if(!a.test(r))throw new Error(r+" "+t.locStr("is not proper email"));return r})),r.abrupt("return",a.filter((function(e){return e})));case 3:case"end":return r.stop()}}),r)})))()},updateInfoEdit:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:T(e.code,e.action,e.state,void 0);case 1:case"end":return t.stop()}}),t)})))()}}}),ye=_e,Ce=(r("955d"),r("cd55")),ke=r("49e2"),Oe=r("c865"),Ve=r("0393"),Me=Object(J["a"])(ye,oe,ce,!1,null,null,null),Te=Me.exports;K()(Me,{VExpansionPanel:Ce["a"],VExpansionPanelContent:ke["a"],VExpansionPanelHeader:Oe["a"],VExpansionPanels:Ve["a"]});var Re=a["default"].extend({name:"MangoFpProcessSteps",components:{MangoFpEditStep:ie,MangoFpEditStepDetails:Te},data:function(){return{newStepModifyOpen:!1,delDialogOpen:!1,delConfirmCode:"",states:bt.state.stateList}},methods:{locStr:function(e){return f(e)},closeStepEdit:function(){this.newStepModifyOpen=!1},openStepAdd:function(){this.newStepModifyOpen=!0},addStepEdit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V(t.action,t.state);case 2:r=e.sent,r&&this.closeStepEdit();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openDeleteConfirm:function(e){this.delConfirmCode=e,this.delDialogOpen=!0},closeDialogConfirm:function(){this.delConfirmCode="",this.delDialogOpen=!1},deleteStep:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("delete code: "+this.delConfirmCode),e.next=3,j(this.delConfirmCode);case 3:if(t=e.sent,t){e.next=7;break}return console.log("Deleteing step failed"),e.abrupt("return",!1);case 7:return this.closeDialogConfirm(),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),orderStepUp:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Order up"),e.abrupt("return",F(t,"up"));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),orderStepDown:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Order down"),e.abrupt("return",F(t,"down"));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),je=Re,Pe=(r("075f"),r("62ad")),Fe=r("a523"),De=r("169a"),Le=r("0fd9"),Ge=r("8dd9"),Ie=r("2fa4"),$e=r("8414"),Ne=r("1e06"),Ue=Object(J["a"])(je,z,W,!1,null,null,null),Be=Ue.exports;K()(Ue,{VBtn:Q["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VCol:Pe["a"],VContainer:Fe["a"],VDialog:De["a"],VRow:Le["a"],VSheet:Ge["a"],VSpacer:Ie["a"],VTimeline:$e["a"],VTimelineItem:Ne["a"]});var ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-sheet",{attrs:{"background-color":"transparent",color:"basil",elevation:"0"}},[r("v-container",{staticClass:"pa-0"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("v-card",{staticClass:"pl-5 pb-5"},[r("v-card-title",[e._v(" "+e._s(e.locStr("General parameters"))+" ")]),r("v-card-text"),e._l(e.data4Edit,(function(t){return r("v-row",{key:t.label,staticClass:"pa-6"},[r("v-col",{attrs:{cols:"3",sm:"2"}},[r("h3",[e._v(" "+e._s(t.name)+" ")])]),r("v-col",{attrs:{cols:"8",sm:"7",md:"5",lg:"4"}},["TEXT"==t.type?r("v-text-field",{staticClass:"input-on-card",attrs:{light:"",solo:"",dense:""},on:{focus:e.onFocus},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"param.value"}}):"EMAIL"==t.type?r("v-text-field",{staticClass:"input-on-card",attrs:{light:"",solo:"",dense:"",error:!!t.errorMsg,"error-messages":t.errorMsg},on:{blur:function(r){return e.validateEmailElem(t)},focus:function(r){return e.clearEmailElemErrorMsg(t)}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"param.value"}}):r("div",[e._v(" "+e._s(e.locStr("Unknown field type: ")+t.type)+" ")]),r("div",{domProps:{innerHTML:e._s(t.hint)}})],1)],1)})),r("v-card-actions",[r("v-btn",{attrs:{outlined:"",text:"",disabled:e.confirmDisabled},on:{click:e.saveParameters}},[e._v(" "+e._s(e.locStr("Confirm"))+" ")])],1)],2)],1)],1)],1)],1)},We=[],Ze=(r("7db0"),r("a434"),r("5530")),qe=a["default"].extend({name:"MangoFpParameters",components:{},data:function(){return{data4Edit:[],parameters:bt.state.parameters,confirmDisabled:!0}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.confirmDisabled=!0,t.next=3,k();case 3:e.confirmDisabled=!1;case 4:case"end":return t.stop()}}),t)})))()},watch:{parameters:function(){for(var e=0;e<this.parameters.length;e++)this.data4Edit.splice(e,1,Object(Ze["a"])({},this.parameters[e]))}},methods:{locStr:function(e){return f(e)},getNewParam4Edit:function(){return{value:"",type:"string",name:""}},saveParameters:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.data4Edit.find((function(e){return e.errorMsg})),!r){t.next=3;break}return t.abrupt("return",!1);case 3:if(n=e.data4Edit.filter((function(t,r){return t.value!==e.parameters[r].value})),!n.length){t.next=9;break}return e.confirmDisabled=!0,t.next=8,N(n);case 8:e.confirmDisabled=!1;case 9:case"end":return t.stop()}}),t)})))()},onFocus:function(){B()},validateEmailElem:function(e){m(e.value)?e.errorMsg="":e.errorMsg=f("Email format is not correct")},clearEmailElemErrorMsg:function(e){this.onFocus(),e.errorMsg=""}}}),Xe=qe,He=(r("67e8"),Object(J["a"])(Xe,ze,We,!1,null,null,null)),Je=He.exports;K()(He,{VBtn:Q["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VCol:Pe["a"],VContainer:Fe["a"],VRow:Le["a"],VSheet:Ge["a"],VTextField:ae["a"]});var Ye=a["default"].extend({name:"MangoFpSettingsMain",components:{MangoFpProcessSteps:Be,MangoFpParameters:Je},data:function(){return{loading:!0,globalState:bt,timeout:3e3}},methods:{locStr:function(e){return f(e)},doOnChange:function(){B()}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:r=t.sent,e.loading=!r;case 4:case"end":return t.stop()}}),t)})))()}}),Ke=Ye,Qe=(r("c827"),r("0798")),et=r("132d"),tt=r("2db4"),rt=r("71a3"),nt=r("c671"),at=r("fe57"),st=Object(J["a"])(Ke,o,c,!1,null,null,null),it=st.exports;K()(st,{VAlert:Qe["a"],VBtn:Q["a"],VCol:Pe["a"],VContainer:Fe["a"],VIcon:et["a"],VProgressCircular:ne["a"],VRow:Le["a"],VSnackbar:tt["a"],VTab:rt["a"],VTabItem:nt["a"],VTabs:at["a"]});var ot={name:"App",components:{MangoFpSettingsMain:it}},ct=ot,lt=(r("f9f2"),r("7496")),ut=r("f6c4"),dt=Object(J["a"])(ct,s,i,!1,null,null,null),pt=dt.exports;K()(dt,{VApp:lt["a"],VContainer:Fe["a"],VMain:ut["a"]});var ft=r("ce5b"),mt=r.n(ft);r("bf40");a["default"].use(mt.a);var vt=new mt.a({});r("b0c0");function ht(e){var t=[],r=[];return{generalAlert:{showAlert:!1,alertMessage:""},generalMessage:{showAlert:!1,alertMessage:""},debug:e,state:{stateList:t,parameters:r},resetState:function(){this.state.stateList.splice(0,this.state.stateList.length),this.clearGeneralAlert()},setGeneralAlert:function(e){this.generalAlert.showAlert=!0,this.generalAlert.alertMessage=e},clearGeneralAlert:function(){this.generalAlert.showAlert=!1,this.generalAlert.alertMessage=""},setGeneralMessage:function(e){this.generalMessage.showAlert=!0,this.generalMessage.alertMessage=e},clearGeneralMessage:function(){this.generalMessage.showAlert=!1,this.generalMessage.alertMessage=""},addState:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.state.stateList.push(Object(Ze["a"])(Object(Ze["a"])({},e),{savingInfo:!1,savingSteps:!1,savingTemplate:!1})),r.abrupt("return",!0);case 2:case"end":return r.stop()}}),r)})))()},updateNextState:function(t,r){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e&&console.log("Will update next states of "+t+" to "+r.join(", ")),s=n.state.stateList.find((function(e){return e.code===t})),s){a.next=5;break}return console.log("Did not find step with code "+t),a.abrupt("return",!1);case 5:return s.next=r,a.abrupt("return",!0);case 7:case"end":return a.stop()}}),a)})))()},updateOrInsertEmailTemplate:function(t,r,n,a){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e&&console.log("Will update email template");var i=this.state.stateList.find((function(e){return e.code===t}));if(!i)return console.log("Did not find step with code "+t),!1;var o=i.template;return o.addresses=n,o.mainAddresses=a,o.template=r,o.loaded=s,o},_findStep:function(e){var t=this.state.stateList.find((function(t){return t.code===e}));if(!t)throw new Error("Step not found");return t},_findOption:function(e){var t=this.state.parameters.find((function(t){return t.label===e}));return t||!1},setOption:function(e){var t=this._findOption(e.label);if(t)t.value=e.value;else{var r={label:e.label,type:e.type,name:e.name,value:e.value,hint:e.hint||"",errorMsg:""};this.state.parameters.push(r)}return!0},markTemplateAsLoaded:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._findStep(e);return r.template.loaded=t,!0},setInfoSaving:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._findStep(e);return r.savingInfo=t,!0},setTemplateSaving:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._findStep(e);return r.savingTemplate=t,!0},updateOrInsertStateInfo:function(t,r,n){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e&&console.log("Will update state info"),i=a.state.stateList.find((function(e){return e.code===t})),i){s.next=6;break}return console.log("Did not find step with code "+t+". Will add"),o={order:a.state.stateList.length+1,code:t,state:n,action:r,next:[],savingInfo:!1,savingTemplate:!1,template:p(t)},s.abrupt("return",a.addState(o));case 6:return i.action=r,i.state=n,s.abrupt("return",!0);case 9:case"end":return s.stop()}}),s)})))()},getAllState:function(){return this.state},getStateList:function(){return this.state.stateList},getParameters:function(){return this.state.parameters},updateOrder:function(e,t){var r=this.state.stateList.find((function(t){return t.code===e}));if(!r)return console.log("Did not find step with code "+e),!1;if(1===r.order&&"up"===t)return!0;if(r.order===this.state.stateList.length&&"down"===t)return!0;var n=r.order-1;"down"===t&&(n=r.order+1);var a=this.state.stateList.find((function(e){return e.order===n}));return a?(a.order=r.order,r.order=n,this.state.stateList[a.order-1]=a,this.state.stateList[r.order-1]=r,!0):(console.log("Unable to find element with order: ".concat(a)),!1)},deleteState:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Store deletes ".concat(e)),t.abrupt("return",!0);case 2:case"end":return t.stop()}}),t)})))()}}}a["default"].config.productionTip=!1;var gt=new a["default"],bt=ht(!0);new a["default"]({vuetify:vt,render:function(e){return e(pt)}}).$mount("#app")},d145:function(e,t,r){},d412:function(e,t,r){},d999:function(e,t,r){"use strict";var n=r("cb26"),a=r.n(n);a.a},ecb6:function(e,t,r){},f38f:function(e,t,r){"use strict";var n=r("d145"),a=r.n(n);a.a},f9f2:function(e,t,r){"use strict";var n=r("7983"),a=r.n(n);a.a}});
//# sourceMappingURL=app.1e9d862a.js.map